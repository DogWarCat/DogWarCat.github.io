(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29a6e076"],{"057f":function(e,t,n){var r=n("fc6a"),a=n("241c").f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return a(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==i.call(e)?c(e):a(r(e))}},"0d03":function(e,t,n){var r=n("6eeb"),a=Date.prototype,i="Invalid Date",s="toString",c=a[s],o=a.getTime;new Date(NaN)+""!=i&&r(a,s,(function(){var e=o.call(this);return e===e?c.call(this):i}))},"10ef":function(e,t,n){"use strict";var r=n("3e4e"),a=n.n(r);a.a},"159b":function(e,t,n){var r=n("da84"),a=n("fdbc"),i=n("17c2"),s=n("9112");for(var c in a){var o=r[c],l=o&&o.prototype;if(l&&l.forEach!==i)try{s(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,a=n("b301");e.exports=a("forEach")?function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach},"215d":function(e,t,n){},"25f0":function(e,t,n){"use strict";var r=n("6eeb"),a=n("825a"),i=n("d039"),s=n("ad6d"),c="toString",o=RegExp.prototype,l=o[c],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=c;(u||f)&&r(RegExp.prototype,c,(function(){var e=a(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in o)?s.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},2756:function(e,t,n){},"3e4e":function(e,t,n){},4160:function(e,t,n){"use strict";var r=n("23e7"),a=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),a=n("5899"),i="["+a+"]",s=RegExp("^"+i+i+"*"),c=RegExp(i+i+"*$"),o=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(c,"")),n}};e.exports={start:o(1),end:o(2),trim:o(3)}},7156:function(e,t,n){var r=n("861d"),a=n("d2bb");e.exports=function(e,t,n){var i,s;return a&&"function"==typeof(i=t.constructor)&&i!==n&&r(s=i.prototype)&&s!==n.prototype&&a(e,s),e}},"740c":function(e,t,n){"use strict";var r=n("2756"),a=n.n(r);a.a},"746f":function(e,t,n){var r=n("428f"),a=n("5135"),i=n("c032"),s=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});a(t,e)||s(t,e,{value:i.f(e)})}},8418:function(e,t,n){"use strict";var r=n("c04e"),a=n("9bf2"),i=n("5c6c");e.exports=function(e,t,n){var s=r(t);s in e?a.f(e,s,i(0,n)):e[s]=n}},"8cb7":function(e,t,n){"use strict";var r=n("215d"),a=n.n(r);a.a},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("23cb"),i=n("a691"),s=n("50c4"),c=n("7b0b"),o=n("65f0"),l=n("8418"),u=n("1dde"),f=Math.max,h=Math.min,d=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!u("splice")},{splice:function(e,t){var n,r,u,v,g,m,b=c(this),y=s(b.length),w=a(e,y),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=y-w):(n=x-2,r=h(f(i(t),0),y-w)),y+n-r>d)throw TypeError(p);for(u=o(b,r),v=0;v<r;v++)g=w+v,g in b&&l(u,v,b[g]);if(u.length=r,n<r){for(v=w;v<y-r;v++)g=v+r,m=v+n,g in b?b[m]=b[g]:delete b[m];for(v=y;v>y-r+n;v--)delete b[v-1]}else if(n>r)for(v=y-r;v>w;v--)g=v+r-1,m=v+n-1,g in b?b[m]=b[g]:delete b[m];for(v=0;v<n;v++)b[v+w]=arguments[v+2];return b.length=y-r+n,u}})},a4d3:function(e,t,n){"use strict";var r=n("23e7"),a=n("da84"),i=n("d066"),s=n("c430"),c=n("83ab"),o=n("4930"),l=n("d039"),u=n("5135"),f=n("e8b5"),h=n("861d"),d=n("825a"),p=n("7b0b"),v=n("fc6a"),g=n("c04e"),m=n("5c6c"),b=n("7c73"),y=n("df75"),w=n("241c"),x=n("057f"),C=n("7418"),S=n("06cf"),_=n("9bf2"),I=n("d1e7"),O=n("9112"),k=n("6eeb"),L=n("5692"),E=n("f772"),A=n("d012"),R=n("90e3"),T=n("b622"),j=n("c032"),N=n("746f"),P=n("d44e"),$=n("69f3"),M=n("b727").forEach,D=E("hidden"),F="Symbol",V="prototype",J=T("toPrimitive"),G=$.set,z=$.getterFor(F),H=Object[V],q=a.Symbol,B=i("JSON","stringify"),U=S.f,X=_.f,Y=x.f,Q=I.f,W=L("symbols"),K=L("op-symbols"),Z=L("string-to-symbol-registry"),ee=L("symbol-to-string-registry"),te=L("wks"),ne=a.QObject,re=!ne||!ne[V]||!ne[V].findChild,ae=c&&l((function(){return 7!=b(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=U(H,t);r&&delete H[t],X(e,t,n),r&&e!==H&&X(H,t,r)}:X,ie=function(e,t){var n=W[e]=b(q[V]);return G(n,{type:F,tag:e,description:t}),c||(n.description=t),n},se=o&&"symbol"==typeof q.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof q},ce=function(e,t,n){e===H&&ce(K,t,n),d(e);var r=g(t,!0);return d(n),u(W,r)?(n.enumerable?(u(e,D)&&e[D][r]&&(e[D][r]=!1),n=b(n,{enumerable:m(0,!1)})):(u(e,D)||X(e,D,m(1,{})),e[D][r]=!0),ae(e,r,n)):X(e,r,n)},oe=function(e,t){d(e);var n=v(t),r=y(n).concat(de(n));return M(r,(function(t){c&&!ue.call(n,t)||ce(e,t,n[t])})),e},le=function(e,t){return void 0===t?b(e):oe(b(e),t)},ue=function(e){var t=g(e,!0),n=Q.call(this,t);return!(this===H&&u(W,t)&&!u(K,t))&&(!(n||!u(this,t)||!u(W,t)||u(this,D)&&this[D][t])||n)},fe=function(e,t){var n=v(e),r=g(t,!0);if(n!==H||!u(W,r)||u(K,r)){var a=U(n,r);return!a||!u(W,r)||u(n,D)&&n[D][r]||(a.enumerable=!0),a}},he=function(e){var t=Y(v(e)),n=[];return M(t,(function(e){u(W,e)||u(A,e)||n.push(e)})),n},de=function(e){var t=e===H,n=Y(t?K:v(e)),r=[];return M(n,(function(e){!u(W,e)||t&&!u(H,e)||r.push(W[e])})),r};if(o||(q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=R(e),n=function(e){this===H&&n.call(K,e),u(this,D)&&u(this[D],t)&&(this[D][t]=!1),ae(this,t,m(1,e))};return c&&re&&ae(H,t,{configurable:!0,set:n}),ie(t,e)},k(q[V],"toString",(function(){return z(this).tag})),I.f=ue,_.f=ce,S.f=fe,w.f=x.f=he,C.f=de,c&&(X(q[V],"description",{configurable:!0,get:function(){return z(this).description}}),s||k(H,"propertyIsEnumerable",ue,{unsafe:!0})),j.f=function(e){return ie(T(e),e)}),r({global:!0,wrap:!0,forced:!o,sham:!o},{Symbol:q}),M(y(te),(function(e){N(e)})),r({target:F,stat:!0,forced:!o},{for:function(e){var t=String(e);if(u(Z,t))return Z[t];var n=q(t);return Z[t]=n,ee[n]=t,n},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(u(ee,e))return ee[e]},useSetter:function(){re=!0},useSimple:function(){re=!1}}),r({target:"Object",stat:!0,forced:!o,sham:!c},{create:le,defineProperty:ce,defineProperties:oe,getOwnPropertyDescriptor:fe}),r({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:he,getOwnPropertySymbols:de}),r({target:"Object",stat:!0,forced:l((function(){C.f(1)}))},{getOwnPropertySymbols:function(e){return C.f(p(e))}}),B){var pe=!o||l((function(){var e=q();return"[null]"!=B([e])||"{}"!=B({a:e})||"{}"!=B(Object(e))}));r({target:"JSON",stat:!0,forced:pe},{stringify:function(e,t,n){var r,a=[e],i=1;while(arguments.length>i)a.push(arguments[i++]);if(r=t,(h(t)||void 0!==e)&&!se(e))return f(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!se(t))return t}),a[1]=t,B.apply(null,a)}})}q[V][J]||O(q[V],J,q[V].valueOf),P(q,F),A[D]=!0},a9e3:function(e,t,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("94ca"),s=n("6eeb"),c=n("5135"),o=n("c6b6"),l=n("7156"),u=n("c04e"),f=n("d039"),h=n("7c73"),d=n("241c").f,p=n("06cf").f,v=n("9bf2").f,g=n("58a8").trim,m="Number",b=a[m],y=b.prototype,w=o(h(y))==m,x=function(e){var t,n,r,a,i,s,c,o,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=g(l),t=l.charCodeAt(0),43===t||45===t){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(i=l.slice(2),s=i.length,c=0;c<s;c++)if(o=i.charCodeAt(c),o<48||o>a)return NaN;return parseInt(i,r)}return+l};if(i(m,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var C,S=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof S&&(w?f((function(){y.valueOf.call(n)})):o(n)!=m)?l(new b(x(t)),n,S):x(t)},_=r?d(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;_.length>I;I++)c(b,C=_[I])&&!c(S,C)&&v(S,C,p(b,C));S.prototype=y,y.constructor=S,s(a,m,S)}},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c0:function(e,t,n){var r=n("83ab"),a=n("9bf2").f,i=Function.prototype,s=i.toString,c=/^\s*function ([^ (]*)/,o="name";!r||o in i||a(i,o,{configurable:!0,get:function(){try{return s.call(this).match(c)[1]}catch(e){return""}}})},b301:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!n||!r((function(){n.call(null,t||function(){throw 1},1)}))}},b3d7:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("van-tabs",{attrs:{swipeable:"","lazy-render":!1},on:{change:e.changeTab},model:{value:e.activeIndex,callback:function(t){e.activeIndex=t},expression:"activeIndex"}},e._l(e.channelsArr,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name}},[n("div",{ref:"scollContainer",refInFor:!0,staticClass:"scroll-wrapper",on:{scroll:function(t){return e.remember(t)}}},[n("van-pull-refresh",{attrs:{"success-text":e.refreshSuccessText},on:{refresh:e.onRefresh},model:{value:e.activeChannel.isLoading,callback:function(t){e.$set(e.activeChannel,"isLoading",t)},expression:"activeChannel.isLoading"}},[n("van-list",{attrs:{finished:e.activeChannel.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.activeChannel.loading,callback:function(t){e.$set(e.activeChannel,"loading",t)},expression:"activeChannel.loading"}},e._l(e.activeChannel.articleList,(function(t,r){return n("van-cell",{key:r,attrs:{to:{name:"article",params:{id:t.art_id.toString()}}}},[n("div",{staticClass:"article_item"},[n("h3",{staticClass:"van-ellipsis"},[e._v(e._s(t.title))]),1===t.cover.type?n("div",{staticClass:"img_box"},[n("van-image",{staticClass:"w100",attrs:{fit:"cover",src:t.cover.images[0],"lazy-load":""}})],1):e._e(),3===t.cover.type?n("div",{staticClass:"img_box"},e._l(t.cover.images,(function(e,t){return n("van-image",{key:t,staticClass:"w33",attrs:{fit:"cover",src:e,"lazy-load":""}})})),1):e._e(),n("div",{staticClass:"info_box"},[n("span",[e._v(e._s(t.aut_name))]),n("span",[e._v(e._s(t.comm_count))]),n("span",[e._v(e._s(e._f("relTime")(t.pubdate)))]),e.user.token?n("span",{staticClass:"close",on:{click:function(n){n.stopPropagation(),e.openMoreAction(t.art_id.toString())}}},[n("van-icon",{attrs:{name:"cross"}})],1):e._e()])])])})),1)],1)],1)])})),1),n("span",{staticClass:"bar_btn",attrs:{slot:"nav-right"},on:{click:e.openChannelEdit},slot:"nav-right"},[n("van-icon",{attrs:{name:"wap-nav"}})],1),e.user.token?n("more-action",{attrs:{articleId:e.articleId},on:{"on-dislikes":function(t){return e.removeArticle()},"on-report":function(t){return e.removeArticle()},"on-delete":e.changeTab},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}):e._e(),n("channel-edit",{attrs:{channelsArr:e.channelsArr,activeIndex:e.activeIndex},on:{"update:activeIndex":function(t){e.activeIndex=t},"update:active-index":function(t){e.activeIndex=t},"on-delete":e.getChannels},model:{value:e.showChannelEdit,callback:function(t){e.showChannelEdit=t},expression:"showChannelEdit"}})],1)},a=[],i=(n("a4d3"),n("4de4"),n("c740"),n("4160"),n("d81d"),n("a434"),n("0d03"),n("b0c0"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("25f0"),n("159b"),n("284c")),s=(n("96cf"),n("2fa7")),c=n("b775"),o=n("4360"),l="hm-toutiao-m-84-channel-key",u=function(){return new Promise((function(e,t){var n,r,a,i,s;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(n=o["a"].state.user,!n.token){t.next=8;break}return t.next=4,regeneratorRuntime.awrap(Object(c["a"])("/app/v1_0/user/channels","get"));case 4:r=t.sent,e(r),t.next=19;break;case 8:if(a=window.localStorage.getItem(l)||"[]",i=JSON.parse(a),i.length){t.next=18;break}return t.next=13,regeneratorRuntime.awrap(Object(c["a"])("/app/v1_0/user/channels","get"));case 13:s=t.sent,window.localStorage.setItem(l,JSON.stringify(s.channels)),e(s),t.next=19;break;case 18:e({channels:i});case 19:case"end":return t.stop()}}))}))},f=function(){return Object(c["a"])("/app/v1_0/channels","get")},h=function(e){return new Promise((function(t,n){var r,a,i,s;return regeneratorRuntime.async((function(u){while(1)switch(u.prev=u.next){case 0:if(u.prev=0,r=o["a"].state.user,!r.token){u.next=8;break}return u.next=5,regeneratorRuntime.awrap(Object(c["a"])("/app/v1_0/user/channels/".concat(e),"delete"));case 5:t(),u.next=14;break;case 8:a=window.localStorage.getItem(l),i=JSON.parse(a),s=i.findIndex((function(t){return t.id===e})),i.splice(s,1),window.localStorage.setItem(l,JSON.stringify(i)),t();case 14:u.next=19;break;case 16:u.prev=16,u.t0=u["catch"](0),n(u.t0);case 19:case"end":return u.stop()}}),null,null,[[0,16]])}))},d=function(e){return new Promise((function(t,n){var r,a,i,s,u,f;return regeneratorRuntime.async((function(h){while(1)switch(h.prev=h.next){case 0:if(h.prev=0,r=o["a"].state.user,!r.token){h.next=8;break}return h.next=5,regeneratorRuntime.awrap(Object(c["a"])("/app/v1_0/user/channels","PUT",{channels:e}));case 5:t(),h.next=14;break;case 8:a=window.localStorage.getItem(l),i=JSON.parse(a),s=e[e.length-1],u=s.id,f=s.name,i.push({id:u,name:f}),window.localStorage.setItem(l,JSON.stringify(i)),t();case 14:h.next=19;break;case 16:h.prev=16,h.t0=h["catch"](0),n(h.t0);case 19:case"end":return h.stop()}}),null,null,[[0,16]])}))},p=n("8691"),v=n("2f62"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-popup",{attrs:{value:e.value},on:{input:function(t){return e.$emit("input",t)},open:function(t){e.isReport=!1}}},[e.isReport?n("van-cell-group",[n("van-cell",{attrs:{icon:"arrow-left"},on:{click:function(t){e.isReport=!1}}},[e._v("返回")]),e._l(e.reports,(function(t){return n("van-cell",{key:t.value,on:{click:function(n){return e.report(t.value)}}},[e._v(e._s(t.label))])}))],2):n("van-cell-group",[n("van-cell",{on:{click:e.dislikes}},[e._v("不感兴趣")]),n("van-cell",{attrs:{"is-link":""},on:{click:function(t){e.isReport=!0}}},[e._v("反馈垃圾内容")]),n("van-cell",[e._v("拉黑作者")])],1)],1)},m=[],b=[{value:0,label:"其他问题"},{value:1,label:"标题夸张"},{value:2,label:"低俗色情"},{value:3,label:"错别字多"},{value:4,label:"旧闻重复"},{value:5,label:"广告软文"},{value:6,label:"内容不实"},{value:7,label:"涉嫌违法犯罪"},{value:8,label:"侵权"}],y={props:{value:{type:Boolean,default:!1},articleId:{type:String,default:null}},data:function(){return{isReport:!1,reports:b}},methods:{dislikes:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Object(p["b"])(this.articleId));case 3:this.$emit("input",!1),this.$emit("on-dislikes"),this.$toast.success("不感兴趣成功"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$toast.fail("不感兴趣失败");case 11:case"end":return e.stop()}}),null,this,[[0,8]])},report:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,regeneratorRuntime.awrap(Object(p["g"])(this.articleId,e));case 3:this.$emit("input",!1),this.$emit("on-report"),this.$toast.success("举报成功"),t.next=13;break;case 8:if(t.prev=8,t.t0=t["catch"](0),!t.t0.response||409!==t.t0.response.status){t.next=12;break}return t.abrupt("return",this.$toast.fail("重复举报"));case 12:this.$toast.fail("举报失败");case 13:case"end":return t.stop()}}),null,this,[[0,8]])}}},w=y,x=(n("8cb7"),n("2877")),C=Object(x["a"])(w,g,m,!1,null,"5afde8c8",null),S=C.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-action-sheet",{attrs:{title:"编辑频道",value:e.value},on:{input:function(t){return e.$emit("input",t)},closed:function(t){e.editing=!1}}},[n("div",{staticClass:"channel"},[n("div",{staticClass:"tit"},[e._v(" 我的频道： "),n("span",{staticClass:"tip"},[e._v("点击可进入频道")]),e.editing?n("van-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(t){e.editing=!1}}},[e._v("完成")]):n("van-button",{attrs:{size:"mini",type:"info",plain:""},on:{click:function(t){e.editing=!0}}},[e._v("编辑")])],1),n("van-grid",{staticClass:"van-hairline--left"},e._l(e.channelsArr,(function(t,r){return n("van-grid-item",{key:t.id},[n("span",{staticClass:"f12",class:{red:e.activeIndex===r},on:{click:function(t){return e.enterChannel(r)}}},[e._v(e._s(t.name))]),n("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.editing&&0!=r,expression:"editing&&i!=0"}],staticClass:"btn",attrs:{name:"cross"},on:{click:function(n){return e.delChannel(r,t.id)}}})],1)})),1)],1),n("div",{staticClass:"channel"},[n("div",{staticClass:"tit"},[e._v("可选频道：")]),n("van-grid",{staticClass:"van-hairline--left"},e._l(e.optionalChannels,(function(t){return n("van-grid-item",{key:t.id},[n("span",{staticClass:"f12"},[e._v(e._s(t.name))]),n("van-icon",{staticClass:"btn",attrs:{name:"plus"},on:{click:function(n){return e.addChannel(t)}}})],1)})),1)],1)])},I=[],O=(n("a9e3"),{props:{value:{type:Boolean,default:!1},channelsArr:{type:Array,default:function(){return[]}},activeIndex:{type:Number,default:0}},data:function(){return{editing:!1,allChannels:[]}},methods:{addChannel:function(e){var t,n,r;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return t=e.id,n=e.name,a.prev=1,r=this.channelsArr.map((function(e,t){return{id:e.id,name:e.name,seq:t}})),r.push({id:t,name:n,seq:r.length}),r.splice(0,1),a.next=7,regeneratorRuntime.awrap(d(r));case 7:this.$toast.success("添加成功"),this.channelsArr.push({id:t,name:n,timestamp:Date.now(),articleList:[],loading:!1,finished:!1,isLoading:!1,scrollTop:0}),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](1),this.$toast.fail("添加失败");case 14:case"end":return a.stop()}}),null,this,[[1,11]])},getAllChannels:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(f());case 2:e=t.sent,this.allChannels=e.channels;case 4:case"end":return t.stop()}}),null,this)},enterChannel:function(e){this.$emit("update:activeIndex",e),this.$emit("input",!1)},delChannel:function(e,t){return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap(h(t));case 3:this.$toast.success("删除成功"),e<=this.activeIndex&&this.$emit("update:activeIndex",this.activeIndex-1),console.log(this.activeIndex),this.channelsArr.splice(e,1),this.$emit("on-delete"),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),this.$toast.fail("删除失败");case 13:case"end":return n.stop()}}),null,this,[[0,10]])}},computed:{optionalChannels:function(){var e=this;return this.allChannels.filter((function(t){return-1===e.channelsArr.findIndex((function(e){return e.id===t.id}))}))}},created:function(){this.getAllChannels()}}),k=O,L=(n("740c"),Object(x["a"])(k,_,I,!1,null,"1030e2a1",null)),E=L.exports;function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={name:"home-index",components:{MoreAction:S,ChannelEdit:E},data:function(){return{channelsArr:[],activeIndex:0,refreshSuccessText:"",show:!1,articleId:null,showChannelEdit:!1}},computed:R({activeChannel:function(){return this.channelsArr[this.activeIndex]}},Object(v["c"])(["user"])),watch:{user:function(){this.activeIndex=0,this.getChannels(),this.onLoad()}},methods:{openChannelEdit:function(){this.showChannelEdit=!0},openMoreAction:function(e){this.show=!0,this.articleId=e},removeArticle:function(){var e=this,t=this.activeChannel.articleList.findIndex((function(t){return t.art_id.toString()===e.articleId}));this.activeChannel.articleList.splice(t,1)},onLoad:function(){var e,t;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.$sleep());case 2:return n.next=4,regeneratorRuntime.awrap(Object(p["d"])({channelId:this.activeChannel.id,timestamp:this.activeChannel.timestamp}));case 4:t=n.sent,this.activeChannel.loading=!1,(e=this.activeChannel.articleList).push.apply(e,Object(i["a"])(t.results)),t.pre_timestamp?this.activeChannel.timestamp=t.pre_timestamp:this.activeChannel.finished=!0;case 8:case"end":return n.stop()}}),null,this)},onRefresh:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return this.activeChannel.timestamp=Date.now(),t.next=3,regeneratorRuntime.awrap(Object(p["d"])({channelId:this.activeChannel.id,timestamp:this.activeChannel.timestamp}));case 3:e=t.sent,this.activeChannel.isLoading=!1,e.results.length?(this.activeChannel.articleList=e.results,this.refreshSuccessText="刷新成功",this.activeChannel.timestamp=e.pre_timestamp,this.onLoad()):this.refreshSuccessText="刷新失败";case 6:case"end":return t.stop()}}),null,this)},getChannels:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(u());case 2:e=t.sent,console.log(e),this.channelsArr=[],this.channelsArr=e.channels.map((function(e){return{id:e.id,name:e.name,timestamp:Date.now(),articleList:[],loading:!1,finished:!1,isLoading:!1,scrollTop:0}}));case 6:case"end":return t.stop()}}),null,this)},changeTab:function(){var e=this;this.activeChannel.articleList.length?this.$nextTick((function(){var t=e.$refs["scollContainer"][e.activeIndex];t.scrollTop=e.activeChannel.scrollTop})):(this.activeChannel.loading=!0,this.onLoad())},remember:function(e){this.activeChannel.scrollTop=e.target.scrollTop}},activated:function(){if(this.$refs["scollContainer"]){var e=this.$refs["scollContainer"][this.activeIndex];e.scrollTop=this.activeChannel.scrollTop}},created:function(){this.getChannels()}},j=T,N=(n("10ef"),Object(x["a"])(j,r,a,!1,null,"bcaea078",null));t["default"]=N.exports},b64b:function(e,t,n){var r=n("23e7"),a=n("7b0b"),i=n("df75"),s=n("d039"),c=s((function(){i(1)}));r({target:"Object",stat:!0,forced:c},{keys:function(e){return i(a(e))}})},c032:function(e,t,n){t.f=n("b622")},c740:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,i=n("44d2"),s="findIndex",c=!0;s in[]&&Array(1)[s]((function(){c=!1})),r({target:"Array",proto:!0,forced:c},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,i=n("1dde");r({target:"Array",proto:!0,forced:!i("map")},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(e,t,n){var r=n("23e7"),a=n("83ab"),i=n("56ef"),s=n("fc6a"),c=n("06cf"),o=n("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,n,r=s(e),a=c.f,l=i(r),u={},f=0;while(l.length>f)n=a(r,t=l[f++]),void 0!==n&&o(u,t,n);return u}})},e439:function(e,t,n){var r=n("23e7"),a=n("d039"),i=n("fc6a"),s=n("06cf").f,c=n("83ab"),o=a((function(){s(1)})),l=!c||o;r({target:"Object",stat:!0,forced:l,sham:!c},{getOwnPropertyDescriptor:function(e,t){return s(i(e),t)}})},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-29a6e076.794381db.js.map