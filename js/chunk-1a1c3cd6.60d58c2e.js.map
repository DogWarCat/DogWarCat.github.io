{"version":3,"sources":["webpack:///./src/views/search/result.vue?596f","webpack:///./src/views/search/result.vue?915f","webpack:///src/views/search/result.vue","webpack:///./src/views/search/result.vue?2d11","webpack:///./src/views/search/result.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","on","$event","remember","attrs","$router","back","finished","onLoad","model","value","callback","$$v","upLoading","expression","_l","item","i","key","name","params","id","art_id","toString","cover","type","images","_e","imageSrc","_v","_s","aut_name","comm_count","_f","pubdate","staticRenderFns","data","articleList","reqParams","scrollTop","activated","$refs","methods","e","target","component"],"mappings":"kHAAA,yBAA4jB,EAAG,G,gECA/jB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,IAAI,YAAYC,YAAY,YAAYC,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOT,EAAIU,SAASD,MAAW,CAACL,EAAG,cAAc,CAACO,MAAM,CAAC,MAAQ,GAAG,MAAQ,OAAO,aAAa,IAAIH,GAAG,CAAC,aAAa,SAASC,GAAQ,OAAOT,EAAIY,QAAQC,WAAWT,EAAG,WAAW,CAACO,MAAM,CAAC,SAAWX,EAAIc,SAAS,gBAAgB,SAASN,GAAG,CAAC,KAAOR,EAAIe,QAAQC,MAAM,CAACC,MAAOjB,EAAa,UAAEkB,SAAS,SAAUC,GAAMnB,EAAIoB,UAAUD,GAAKE,WAAW,cAAc,CAACjB,EAAG,iBAAiBJ,EAAIsB,GAAItB,EAAe,aAAE,SAASuB,EAAKC,GAAG,OAAOpB,EAAG,WAAW,CAACqB,IAAID,EAAEb,MAAM,CAAC,GAAK,CAACe,KAAK,UAAUC,OAAO,CAACC,GAAGL,EAAKM,OAAOC,eAAe,CAAC1B,EAAG,MAAM,CAACG,YAAY,gBAAgB,CAAoB,IAAlBgB,EAAKQ,MAAMC,KAAU5B,EAAG,MAAM,CAACG,YAAY,WAAW,CAACH,EAAG,YAAY,CAACG,YAAY,OAAOI,MAAM,CAAC,IAAM,QAAQ,IAAMY,EAAKQ,MAAME,OAAO,OAAO,GAAGjC,EAAIkC,KAAwB,IAAlBX,EAAKQ,MAAMC,KAAU5B,EAAG,MAAM,CAACG,YAAY,WAAWP,EAAIsB,GAAIC,EAAKQ,MAAY,QAAE,SAASI,EAASX,GAAG,OAAOpB,EAAG,YAAY,CAACqB,IAAID,EAAEjB,YAAY,MAAMI,MAAM,CAAC,IAAM,QAAQ,IAAMwB,QAAc,GAAGnC,EAAIkC,KAAK9B,EAAG,MAAM,CAACG,YAAY,YAAY,CAACH,EAAG,OAAO,CAACJ,EAAIoC,GAAGpC,EAAIqC,GAAGd,EAAKe,aAAalC,EAAG,OAAO,CAACJ,EAAIoC,GAAGpC,EAAIqC,GAAGd,EAAKgB,YAAY,QAAQnC,EAAG,OAAO,CAACJ,EAAIoC,GAAGpC,EAAIqC,GAAGrC,EAAIwC,GAAG,UAAPxC,CAAkBuB,EAAKkB,sBAAqB,IAAI,IAAI,IACxwCC,EAAkB,G,gDCoCtB,GACEhB,KAAM,gBACNiB,KAFF,WAGI,MAAO,CACLvB,WAAW,EACXN,UAAU,EACV8B,YAAa,GACbC,UAAW,CAAjB,8BACMC,UAAW,IAGfC,UAXF,WAYI9C,KAAK+C,MAAM,aAAaF,UAAY7C,KAAK6C,WAE3CG,QAAS,CAEPvC,SAFJ,SAEA,GACMT,KAAK6C,UAAYI,EAAEC,OAAOL,WAG5B,OANJ,8IAQA,gCARA,OAQA,EARA,QASA,4DAEA,kBAGA,iBAGA,sBAFA,iBAfA,kDCnD+V,I,wBCQ3VM,EAAY,eACd,EACArD,EACA2C,GACA,EACA,KACA,WACA,MAIa,aAAAU,E","file":"js/chunk-1a1c3cd6.60d58c2e.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./result.vue?vue&type=style&index=0&id=4fe4f6a9&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./result.vue?vue&type=style&index=0&id=4fe4f6a9&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",staticClass:\"container\",on:{\"scroll\":function($event){return _vm.remember($event)}}},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"搜索结果\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.upLoading),callback:function ($$v) {_vm.upLoading=$$v},expression:\"upLoading\"}},[_c('van-cell-group',_vm._l((_vm.articleList),function(item,i){return _c('van-cell',{key:i,attrs:{\"to\":{name:'article',params:{id:item.art_id.toString()}}}},[_c('div',{staticClass:\"article_item\"},[(item.cover.type===1)?_c('div',{staticClass:\"img_box\"},[_c('van-image',{staticClass:\"w100\",attrs:{\"fit\":\"cover\",\"src\":item.cover.images[0]}})],1):_vm._e(),(item.cover.type===3)?_c('div',{staticClass:\"img_box\"},_vm._l((item.cover.images),function(imageSrc,i){return _c('van-image',{key:i,staticClass:\"w33\",attrs:{\"fit\":\"cover\",\"src\":imageSrc}})}),1):_vm._e(),_c('div',{staticClass:\"info_box\"},[_c('span',[_vm._v(_vm._s(item.aut_name))]),_c('span',[_vm._v(_vm._s(item.comm_count)+\"评论\")]),_c('span',[_vm._v(_vm._s(_vm._f(\"relTime\")(item.pubdate)))])])])])}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\" ref=\"container\" @scroll=\"remember($event)\">\r\n    <van-nav-bar fixed title=\"搜索结果\" left-arrow @click-left=\"$router.back()\" />\r\n    <van-list @load=\"onLoad\" v-model=\"upLoading\" :finished=\"finished\" finished-text=\"没有更多了\">\r\n      <van-cell-group>\r\n        <van-cell\r\n          v-for=\"(item,i) in articleList\"\r\n          :key=\"i\"\r\n          :to=\"{name:'article',params:{id:item.art_id.toString()}}\"\r\n        >\r\n          <div class=\"article_item\">\r\n            <div class=\"img_box\" v-if=\"item.cover.type===1\">\r\n              <van-image class=\"w100\" fit=\"cover\" :src=\"item.cover.images[0]\" />\r\n            </div>\r\n            <div class=\"img_box\" v-if=\"item.cover.type===3\">\r\n              <van-image\r\n                v-for=\"(imageSrc,i) in item.cover.images\"\r\n                :key=\"i\"\r\n                class=\"w33\"\r\n                fit=\"cover\"\r\n                :src=\"imageSrc\"\r\n              />\r\n            </div>\r\n            <div class=\"info_box\">\r\n              <span>{{item.aut_name}}</span>\r\n              <span>{{item.comm_count}}评论</span>\r\n              <span>{{item.pubdate|relTime}}</span>\r\n            </div>\r\n          </div>\r\n        </van-cell>\r\n      </van-cell-group>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { searchArticles } from '@/api/articles'\r\nexport default {\r\n  name: 'search-result',\r\n  data () {\r\n    return {\r\n      upLoading: false,\r\n      finished: false,\r\n      articleList: [],\r\n      reqParams: { page: 1, q: this.$route.query.q },\r\n      scrollTop: 0\r\n    }\r\n  },\r\n  activated () {\r\n    this.$refs['container'].scrollTop = this.scrollTop\r\n  },\r\n  methods: {\r\n    // 记忆下滑位置\r\n    remember (e) {\r\n      this.scrollTop = e.target.scrollTop\r\n      // console.log(this.scrollTop)\r\n    },\r\n    async onLoad () {\r\n      // 异步更新数据\r\n      const data = await searchArticles(this.reqParams)\r\n      this.articleList.push(...data.results)\r\n      // 加载状态结束\r\n      this.upLoading = false\r\n\r\n      // 数据全部加载完成\r\n      if (!data.results.length) {\r\n        this.finished = true\r\n      } else {\r\n        this.reqParams.page++\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  padding-top: 46px;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  box-sizing: border-box;\r\n}\r\n.article_item {\r\n  h3 {\r\n    font-weight: normal;\r\n    line-height: 2;\r\n  }\r\n  .img_box {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    .w33 {\r\n      width: 33%;\r\n      height: 90px;\r\n    }\r\n    .w100 {\r\n      height: 180px;\r\n      width: 100%;\r\n    }\r\n  }\r\n  .info_box {\r\n    color: #999;\r\n    line-height: 2;\r\n    position: relative;\r\n    span {\r\n      padding-right: 10px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./result.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./result.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./result.vue?vue&type=template&id=4fe4f6a9&scoped=true&\"\nimport script from \"./result.vue?vue&type=script&lang=js&\"\nexport * from \"./result.vue?vue&type=script&lang=js&\"\nimport style0 from \"./result.vue?vue&type=style&index=0&id=4fe4f6a9&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4fe4f6a9\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}