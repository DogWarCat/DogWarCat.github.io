(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40aa1623"],{"0d03":function(e,t,n){var a=n("6eeb"),r=Date.prototype,o="Invalid Date",i="toString",c=r[i],s=r.getTime;new Date(NaN)+""!=o&&a(r,i,(function(){var e=s.call(this);return e===e?c.call(this):o}))},"669d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("van-nav-bar",{attrs:{"left-arrow":"",title:"编辑资料","right-text":"保存"},on:{"click-left":function(t){return e.$router.back()},"click-right":e.save}}),n("van-cell-group",[n("van-cell",{attrs:{"is-link":"",title:"头像",center:""},on:{click:function(t){e.showPhoto=!0}}},[n("van-image",{attrs:{slot:"default",width:"1.5rem",height:"1.5rem",fit:"cover",round:"",src:e.photo},slot:"default"})],1),n("van-cell",{attrs:{"is-link":"",title:"名称",value:e.user.name},on:{click:function(t){e.showName=!0}}}),n("van-cell",{attrs:{"is-link":"",title:"性别",value:0===e.user.gender?"男":"女"},on:{click:function(t){e.showGender=!0}}}),n("van-cell",{attrs:{"is-link":"",title:"生日",value:e.user.birthday},on:{click:function(t){return e.openDate()}}})],1),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showPhoto,callback:function(t){e.showPhoto=t},expression:"showPhoto"}},[n("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.preview}}),n("van-cell",{attrs:{value:"本地相册选择","is-link":""},on:{click:function(t){return e.$refs.fileInput.click()}}}),n("van-cell",{attrs:{value:"拍照","is-link":""}})],1),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showName,callback:function(t){e.showName=t},expression:"showName"}},[n("van-field",{attrs:{required:"",placeholder:"请输入用户名"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showGender,callback:function(t){e.showGender=t},expression:"showGender"}},[n("van-cell",{attrs:{value:"男","is-link":""},on:{click:function(t){return e.changeGender(0)}}}),n("van-cell",{attrs:{value:"女","is-link":""},on:{click:function(t){return e.changeGender(1)}}})],1),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showBirthday,callback:function(t){e.showBirthday=t},expression:"showBirthday"}},[n("van-datetime-picker",{attrs:{title:"选择生日",type:"date","min-date":e.minDate},on:{cancel:function(t){e.dateShow=!1},confirm:e.confirmDate},model:{value:e.nowDate,callback:function(t){e.nowDate=t},expression:"nowDate"}})],1)],1)},r=[],o=(n("0d03"),n("b0c0"),n("d3b7"),n("96cf"),n("5a0c")),i=n.n(o),c=n("c24f"),s={name:"user-profile",data:function(){return{showPhoto:!1,showName:!1,showGender:!1,showBirthday:!1,nowDate:new Date,minDate:new Date("1950-01-01"),photo:"https://img.yzcdn.cn/vant/cat.jpeg",user:{name:"默认信息",gender:0,birthday:"2019-10-10"}}},created:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Object(c["c"])());case 2:e=t.sent,this.photo=e.photo,this.user=e;case 5:case"end":return t.stop()}}),null,this)},methods:{openDate:function(){this.user.birthday&&(this.nowDate=new Date(this.user.birthday)),this.showBirthday=!0},confirmDate:function(e){this.user.birthday=i()(e).format("YYYY-MM-DD"),this.showBirthday=!1},changeGender:function(e){this.user.gender=e,this.showGender=!1},preview:function(){var e=this,t=this.$refs.fileInput.files[0],n=new FileReader;n.readAsDataURL(t),n.onload=function(){e.photo=n.result,e.showPhoto=!1}},save:function(){var e,t,n,a,r;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,e=new FormData,e.append("photo",this.$refs.fileInput.files[0]),o.next=5,regeneratorRuntime.awrap(Object(c["f"])(e));case 5:return t=this.user,n=t.name,a=t.gender,r=t.birthday,o.next=8,regeneratorRuntime.awrap(Object(c["e"])(n,a,r));case 8:this.$toast.success("保存成功"),o.next=14;break;case 11:o.prev=11,o.t0=o["catch"](0),this.$toast.fail("保存失败");case 14:case"end":return o.stop()}}),null,this,[[0,11]])}}},u=s,l=n("2877"),h=Object(l["a"])(u,a,r,!1,null,null,null);t["default"]=h.exports},b0c0:function(e,t,n){var a=n("83ab"),r=n("9bf2").f,o=Function.prototype,i=o.toString,c=/^\s*function ([^ (]*)/,s="name";!a||s in o||r(o,s,{configurable:!0,get:function(){try{return i.call(this).match(c)[1]}catch(e){return""}}})},c24f:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return l}));var a=n("b775"),r=function(e){var t=e.mobile,n=e.code;return Object(a["a"])("/app/v1_0/authorizations","post",{mobile:t,code:n})},o=function(e){return Object(a["a"])("/app/v1_0/user/followings","post",{target:e})},i=function(e){return Object(a["a"])("/app/v1_0/user/followings/".concat(e),"delete")},c=function(){return Object(a["a"])("/app/v1_0/user","get")},s=function(){return Object(a["a"])("/app/v1_0/user/profile","get")},u=function(e,t,n){return Object(a["a"])("/app/v1_0/user/profile","PATCH",{name:e,gender:t,birthday:n})},l=function(e){return Object(a["a"])("/app/v1_0/user/photo","PATCH",e)}}}]);
//# sourceMappingURL=chunk-40aa1623.1bcb96a5.js.map