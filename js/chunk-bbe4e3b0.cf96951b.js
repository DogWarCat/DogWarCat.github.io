(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bbe4e3b0"],{"0d03":function(t,e,n){var i=n("6eeb"),a=Date.prototype,s="Invalid Date",r="toString",c=a[r],o=a.getTime;new Date(NaN)+""!=s&&i(a,r,(function(){var t=o.call(this);return t===t?c.call(this):s}))},"14e6":function(t,e,n){"use strict";var i=n("6622"),a=n.n(i);a.a},"25f0":function(t,e,n){"use strict";var i=n("6eeb"),a=n("825a"),s=n("d039"),r=n("ad6d"),c="toString",o=RegExp.prototype,l=o[c],u=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),p=l.name!=c;(u||p)&&i(RegExp.prototype,c,(function(){var t=a(this),e=String(t.source),n=t.flags,i=String(void 0===n&&t instanceof RegExp&&!("flags"in o)?r.call(t):n);return"/"+e+"/"+i}),{unsafe:!0})},"3ebd":function(t,e,n){},6622:function(t,e,n){},"72b4":function(t,e,n){"use strict";var i=n("3ebd"),a=n.n(i);a.a},"7db0":function(t,e,n){"use strict";var i=n("23e7"),a=n("b727").find,s=n("44d2"),r="find",c=!0;r in[]&&Array(1)[r]((function(){c=!1})),i({target:"Array",proto:!0,forced:c},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s(r)},ad6d:function(t,e,n){"use strict";var i=n("825a");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},c24f:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"g",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return u}));var i=n("b775"),a=function(t){var e=t.mobile,n=t.code;return Object(i["a"])("/app/v1_0/authorizations","post",{mobile:e,code:n})},s=function(t){return Object(i["a"])("/app/v1_0/user/followings","post",{target:t})},r=function(t){return Object(i["a"])("/app/v1_0/user/followings/".concat(t),"delete")},c=function(){return Object(i["a"])("/app/v1_0/user","get")},o=function(){return Object(i["a"])("/app/v1_0/user/profile","get")},l=function(t,e,n){return Object(i["a"])("/app/v1_0/user/profile","PATCH",{name:t,gender:e,birthday:n})},u=function(t){return Object(i["a"])("/app/v1_0/user/photo","PATCH",t)}},fa20:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"container",on:{scroll:function(e){return t.remember(e)}}},[n("van-nav-bar",{attrs:{fixed:"",title:"文章详情","right-text":"分享","left-arrow":""},on:{"click-left":function(e){return t.$router.back()},"click-right":t.share}}),n("div",{staticClass:"detail"},[n("h3",{staticClass:"title"},[t._v(t._s(t.article.title))]),n("div",{staticClass:"author"},[n("van-image",{attrs:{round:"",width:"1rem",height:"1rem",fit:"fill",src:t.article.aut_photo}}),n("div",{staticClass:"text"},[n("p",{staticClass:"name"},[t._v(t._s(t.article.aut_name))]),n("p",{staticClass:"time"},[t._v(t._s(t._f("relTime")(t.article.pubdate)))])]),n("van-button",{attrs:{round:"",size:"small",type:"info"},on:{click:t.followed}},[t._v(t._s(t.article.is_followed?"已关注":"+ 关注"))])],1),n("div",{staticClass:"content"},[n("p",{domProps:{innerHTML:t._s(t.article.content)}})]),n("div",{staticClass:"zan"},[n("van-button",{class:{active:1===t.article.attitude},attrs:{round:"",size:"small",plain:"",icon:"like-o"},on:{click:function(e){return t.updateStatus(1)}}},[t._v("点赞")]),t._v(" "),n("van-button",{class:{active:0===t.article.attitude},attrs:{round:"",size:"small",plain:"",icon:"delete"},on:{click:function(e){return t.updateStatus(0)}}},[t._v("不喜欢")])],1),n("comment")],1)],1)},a=[],s=(n("0d03"),n("d3b7"),n("25f0"),n("96cf"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.getComments},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.comments,(function(e,i){return n("div",{key:i,staticClass:"item van-hairline--bottom van-hairline--top"},[n("van-image",{attrs:{round:"",width:"1rem",height:"1rem",fit:"fill",src:e.aut_photo}}),n("div",{staticClass:"info"},[n("p",[n("span",{staticClass:"name"},[t._v(t._s(e.aut_name))]),n("span",{staticStyle:{float:"right"}},[n("span",{staticClass:"van-icon van-icon-good-job-o zan"}),n("span",{staticClass:"count"},[t._v(t._s(e.like_count))])])]),n("p",[t._v(t._s(e.content))]),n("p",[n("span",{staticClass:"time"},[t._v(t._s(t._f("relTime")(e.pubdate)))]),t._v(" "),n("van-tag",{attrs:{plain:""},on:{click:function(n){t.openReplyDailog(e.com_id.toString())}}},[t._v(t._s(e.reply_count)+" 回复")])],1)])],1)})),0),n("van-action-sheet",{staticClass:"reply_dailog",attrs:{title:"回复评论"},on:{close:function(e){t.reply.com_id=null}},model:{value:t.showReply,callback:function(e){t.showReply=e},expression:"showReply"}},[n("van-list",{attrs:{"immediate-check":!1,finished:t.reply.finished,"finished-text":"没有更多回复了"},on:{load:t.getReplay},model:{value:t.reply.loading,callback:function(e){t.$set(t.reply,"loading",e)},expression:"reply.loading"}},t._l(t.reply.list,(function(e,i){return n("div",{key:i,staticClass:"item van-hairline--bottom van-hairline--top"},[n("van-image",{attrs:{round:"",width:"1rem",height:"1rem",fit:"fill",src:"https://img.yzcdn.cn/vant/cat.jpeg"}}),n("div",{staticClass:"info"},[n("p",[n("span",{staticClass:"name"},[t._v(t._s(e.aut_name))])]),n("p",[t._v(t._s(e.content))]),n("p",[n("span",{staticClass:"time"},[t._v(t._s(t._f("relTime")(e.pubdate)))])])])],1)})),0)],1),n("div",{staticClass:"reply-container van-hairline--top"},[n("van-field",{attrs:{placeholder:"写评论..."},model:{value:t.value,callback:function(e){t.value="string"===typeof e?e.trim():e},expression:"value"}},[t.submiting?n("van-loading",{attrs:{slot:"button",type:"spinner",size:"16px"},slot:"button"}):n("span",{staticClass:"submit",attrs:{slot:"button"},on:{click:t.submit},slot:"button"},[t._v("提交")])],1)],1)],1)}),r=[],c=(n("7db0"),n("284c")),o=n("8691"),l={data:function(){return{value:"",submiting:!1,loading:!1,finished:!1,offset:null,comments:[],showReply:!1,reply:{loading:!1,finished:!1,offset:null,com_id:"",list:[]}}},activated:function(){this.finished=!1,this.loading=!0,this.comments=[],this.getComments()},methods:{getComments:function(){var t,e;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(Object(o["e"])({type:"a",source:this.$route.params.id,offset:this.offset}));case 2:e=n.sent,(t=this.comments).push.apply(t,Object(c["a"])(e.results)),this.loading=!1,e.last_id>e.end_id?this.offset=e.last_id:this.finished=!0;case 6:case"end":return n.stop()}}),null,this)},openReplyDailog:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:this.reply={loading:!0,finished:!1,offset:null,list:[]},this.showReply=!0,this.reply.com_id=t,this.getReplay();case 4:case"end":return e.stop()}}),null,this)},getReplay:function(){var t,e;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(Object(o["e"])({type:"c",source:this.reply.com_id,offset:this.reply.offset}));case 2:e=n.sent,(t=this.reply.list).push.apply(t,Object(c["a"])(e.results)),this.reply.loading=!1,e.last_id>e.end_id?this.reply.offset=e.last_id:this.reply.finished=!0;case 6:case"end":return n.stop()}}),null,this)},submit:function(){var t,e,n=this;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:if(i.prev=0,this.value){i.next=3;break}return i.abrupt("return",!1);case 3:if(this.submiting=!0,!this.reply.com_id){i.next=14;break}return i.next=7,regeneratorRuntime.awrap(Object(o["a"])(this.reply.com_id,this.value,this.$route.params.id));case 7:t=i.sent,this.$toast.success("添加回复成功"),console.log(t),this.reply.list.unshift(t.new_obj),this.comments.find((function(t){return t.com_id.toString()===n.reply.com_id})).reply_count++,i.next=20;break;case 14:return i.next=16,regeneratorRuntime.awrap(Object(o["a"])(this.$route.params.id,this.value));case 16:e=i.sent,this.$toast.success("添加评论成功"),console.log(e),this.comments.unshift(e.new_obj);case 20:this.submiting=!1,this.value="",i.next=28;break;case 24:i.prev=24,i.t0=i["catch"](0),this.$toast.fail("操作失败"),this.submiting=!1;case 28:case"end":return i.stop()}}),null,this,[[0,24]])}}},u=l,p=(n("14e6"),n("2877")),d=Object(p["a"])(u,s,r,!1,null,"41d69aa2",null),f=d.exports,h=n("c24f"),m={name:"article-index",components:{Comment:f},data:function(){return{article:{art_id:"",is_followed:!1},scrollTop:0}},activated:function(){this.$route.params.id!==this.article.art_id.toString()?(this.getArticle(),this.srcollTop=0):this.$refs["container"].scrollTop=this.scrollTop},methods:{share:function(){plus.share.sendWithSystem({content:"分享调试",href:"http://www.dcloud.io/"},(function(){console.log("分享成功")}),(function(t){console.log("分享失败："+JSON.stringify(t))}))},getArticle:function(){var t;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Object(o["c"])(this.$route.params.id));case 2:t=e.sent,this.article=t;case 4:case"end":return e.stop()}}),null,this)},remember:function(t){this.scrollTop=t.target.scrollTop},followed:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.article.is_followed){t.next=8;break}return t.next=4,regeneratorRuntime.awrap(Object(h["g"])(this.article.aut_id));case 4:this.$toast.success("取消关注成功"),this.article.is_followed=!1,t.next=12;break;case 8:return t.next=10,regeneratorRuntime.awrap(Object(h["a"])(this.article.aut_id));case 10:this.$toast.success("添加关注成功"),this.article.is_followed=!0;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),401!==t.t0.response.status&&this.$toast.fail("操作失败");case 17:case"end":return t.stop()}}),null,this,[[0,14]])},updateStatus:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,1!==t){e.next=13;break}if(1!==this.article.attitude){e.next=8;break}return this.article.attitude=-1,e.next=6,regeneratorRuntime.awrap(Object(o["k"])(this.article.art_id));case 6:e.next=11;break;case 8:return this.article.attitude=1,e.next=11,regeneratorRuntime.awrap(Object(o["f"])(this.article.art_id));case 11:e.next=22;break;case 13:if(0!==this.article.attitude){e.next=19;break}return this.article.attitude=-1,e.next=17,regeneratorRuntime.awrap(Object(o["j"])(this.article.art_id));case 17:e.next=22;break;case 19:return this.article.attitude=0,e.next=22,regeneratorRuntime.awrap(Object(o["b"])(this.article.art_id));case 22:this.$toast.success("操作成功"),e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](0),401!==e.t0.response.status&&this.$toast.fail("操作失败");case 28:case"end":return e.stop()}}),null,this,[[0,25]])}}},v=m,g=(n("72b4"),Object(p["a"])(v,i,a,!1,null,"68305416",null));e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-bbe4e3b0.cf96951b.js.map